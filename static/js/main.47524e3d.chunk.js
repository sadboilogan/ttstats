(this.webpackJsonpttstats=this.webpackJsonpttstats||[]).push([[0],{360:function(e){e.exports=JSON.parse('[["server.tycoon.community:30120","Server #1"],["server.tycoon.community:30122","Server #2"],["server.tycoon.community:30123","Server #3"],["server.tycoon.community:30124","Server #4"],["server.tycoon.community:30125","Server #5 (Beta)"],["ca.tycoon.community:30120","Server #6"],["ca.tycoon.community:30122","Server #7"],["ca.tycoon.community:30123","Server #8"],["ca.tycoon.community:30124","Server #9"],["ca.tycoon.community:30125","Server #A"]]')},364:function(e,t,a){e.exports=a(401)},400:function(e,t,a){},401:function(e,t,a){"use strict";a.r(t);a(90),a(100),a(101),a(102),a(103),a(104),a(105),a(106),a(107),a(108),a(109),a(110),a(111),a(112),a(113),a(153),a(155),a(156),a(157),a(158),a(159),a(160),a(162),a(163),a(117),a(167),a(168),a(69),a(172),a(173),a(175),a(176),a(177),a(178),a(179),a(180),a(181),a(182),a(183),a(184),a(185),a(186),a(187),a(188),a(190),a(191),a(192),a(193),a(194),a(195),a(125),a(196),a(198),a(200),a(201),a(202),a(203),a(204),a(205),a(206),a(207),a(208),a(209),a(210),a(211),a(212),a(213),a(214),a(127),a(215),a(216),a(217),a(218),a(220),a(221),a(222),a(223),a(224),a(226),a(228),a(230),a(231),a(233),a(234),a(235),a(237),a(238),a(239),a(240),a(241),a(242),a(243),a(245),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(253),a(128),a(254),a(255),a(256),a(257),a(263),a(264),a(265),a(266),a(267),a(268),a(269),a(270),a(271),a(272),a(273),a(274),a(275),a(276),a(130),a(277),a(278),a(279),a(280),a(281),a(282),a(283),a(86),a(284),a(285),a(287),a(288),a(289),a(290),a(291),a(292),a(293),a(294),a(295),a(296),a(297),a(298),a(299),a(300),a(301),a(302),a(303),a(304),a(305),a(306),a(307),a(308),a(309),a(310),a(313),a(314),a(315),a(316),a(317),a(318),a(319),a(320),a(321),a(322),a(323),a(324),a(325),a(326),a(327),a(328),a(329),a(330),a(331),a(332),a(333),a(334),a(335),a(336),a(337),a(338),a(339),a(340),a(341),a(342),a(343),a(344),a(345),a(346),a(348),a(349),a(351),a(352),a(353),a(354),a(356),a(138),a(377),a(385);var n=a(0),r=a.n(n),l=a(359),c=a.n(l),u=a(29),o=a(48),s=a(40),i=a(17),m=a(360),E=function(){return function(e){e({type:"CLEARSERVERSLIST"}),m.forEach((function(t,a){e({type:"ADDSERVER",data:{error:null,isLoaded:!1,ip:t[0],name:t[1],playersData:null,serverData:null,lastUpdate:null},index:a}),F(t,a)(e)})),e({type:"SERVERSINITED"})}},F=function(e,t){return function(a){var n;console.log("index",t),(n=fetch("http://"+e[0]+"/status/widget/players.json").then((function(e){return e.json()})),new Promise((function(e,t){setTimeout((function(){return t(new Error("timeout"))}),2e3),n.then(e,t)}))).then((function(e){e.players.forEach((function(e){""===e[5]&&(e[5]="Unemployed")})),a({type:"UPDATESERVER",data:{isLoaded:!0,playersData:e.players,serverData:e.server,lastUpdate:Date.now()},index:t})}),(function(){a({type:"UPDATESERVER",data:{isLoaded:!0,error:!0,lastUpdate:Date.now()},index:t})})).catch((function(){a({type:"UPDATESERVER",data:{isLoaded:!0,error:!0,lastUpdate:Date.now()},index:t})}))}},d=function(e,t){switch(t.type){case"ADDSERVER":var a=e.servers.slice();return a.splice(t.index,0,t.data),e.servers=a,Object(i.a)({},e);case"SERVERSINITED":return Object(i.a)({},e,{inited:!0});case"UPDATESERVER":return e.servers=e.servers.map((function(e,a){return a!==t.index?e:Object(i.a)({},e,{},t.data)})),Object(i.a)({},e);case"CLEARSERVERSLIST":return e.servers=[],Object(i.a)({},e);default:return e}},v={servers:[],inited:!1},p=Object(n.createContext)(v),f=function(e){var t=e.children,a=Object(n.useReducer)(d,v),l=Object(s.a)(a,2),c=l[0],u=l[1];return Object(n.useEffect)((function(){E()(u)}),[]),r.a.createElement(p.Provider,{value:{state:c,dispatch:u}},t)};function b(){var e=Object(n.useContext)(p);return r.a.createElement("div",null,r.a.createElement("h2",null,"Transport Tycoon Servers List"),r.a.createElement("table",{id:"serversList"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Connect"),r.a.createElement("th",null,"Players"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Uptime"),r.a.createElement("th",null,"Details")),e.state.servers.map((function(e,t){return e.error?r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.ip,r.a.createElement("br",null),r.a.createElement("b",null,e.name)),r.a.createElement("td",null,"-/-"),r.a.createElement("td",{style:{color:"red"}},"OFFLINE"),r.a.createElement("td",null),r.a.createElement("td",null)):!1===e.isLoaded?r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.ip,r.a.createElement("br",null),r.a.createElement("b",null,e.name)),r.a.createElement("td",null,"-/-"),r.a.createElement("td",{style:{color:"grey"}},"Loading"),r.a.createElement("td",null),r.a.createElement("td",null)):void 0===e.playersData?r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.ip,r.a.createElement("br",null),r.a.createElement("b",null,e.name)),r.a.createElement("td",null,"-/-"),r.a.createElement("td",{style:{color:"red"}},"ERROR"),r.a.createElement("td",null),r.a.createElement("td",null)):r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement("a",{href:"fivem://connect/"+e.ip,title:"connect"},e.ip),r.a.createElement("br",null),r.a.createElement("b",null,e.name)),r.a.createElement("td",null,e.playersData.length,"/",e.serverData.limit),r.a.createElement("td",{style:{color:"green"}},"ONLINE"),r.a.createElement("td",null,e.serverData?e.serverData.uptime:"-"),r.a.createElement("td",null,r.a.createElement(u.b,{to:"/?serverinfo="+(+t+1),className:"btn btn-primary"},"Players")))})))),r.a.createElement("h3",null,"Total Players Online: ",e.state.servers.reduce((function(e,t){return t.isLoaded&&t.playersData?e+t.playersData.length:e}),0)))}function y(e){var t=Object(n.useContext)(p),a=parseInt(e.url[1]);if(!a||isNaN(a))return r.a.createElement("div",null,r.a.createElement("h2",null,"URL ERROR"));var l=t.state.servers[a-1];if(!1===t.state.inited)return r.a.createElement("div",null,r.a.createElement("h2",null,"Loading"));if(void 0===l)return r.a.createElement("div",null,r.a.createElement("h2",null,"SERVER ERROR"));var c=r.a.createElement("div",null,r.a.createElement("h2",null,"Players List On ",l.name,r.a.createElement("br",null),"IP: ",r.a.createElement("a",{href:"fivem://connect/"+l.ip},l.ip),r.a.createElement("br",null),"Uptime: ",l.serverData?l.serverData.uptime:"?",r.a.createElement("br",null),r.a.createElement(u.b,{to:"/?status",className:"btn btn-primary"},"Back")));return l.playersData&&0!==l.playersData.length?r.a.createElement("div",null,c,r.a.createElement("table",{id:"playersList"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Avatar"),r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Job")),l.playersData.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e[3]?r.a.createElement("a",{href:e[3],target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:e[3]||"#",height:"50px",alt:"img",className:"avatar"})):r.a.createElement("div",{className:"no-avatar"})),r.a.createElement("td",null,"#",t+1),r.a.createElement("td",null,r.a.createElement("b",null,e[0])),r.a.createElement("td",null,e[2]),r.a.createElement("td",null,e[5]||"-"))})))),r.a.createElement("h3",null,"Updated on ",new Date(l.lastUpdate).toTimeString())):r.a.createElement("div",null,c,r.a.createElement("h2",null,"No Players"))}function h(e){var t,a=Object(n.useContext)(p);e.url.length>1&&e.url.forEach((function(e){var a=e.split(":");"job"===a[0]&&(t=decodeURI(a[1]))}));var l=Object(n.useState)({playerFinderMessages:[],playerFinderInputField:"",playerFinderFound:[],serverSelect:"All Servers",jobSelect:t||"All Jobs"}),c=Object(s.a)(l,2),u=c[0],o=c[1],m=Object(n.useState)([]),E=Object(s.a)(m,2),F=E[0],d=E[1],v=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=u.playerFinderInputField.toLowerCase(),n=[];a.state.servers.forEach((function(e){null!==e.playersData&&e.playersData.forEach((function(a){var r=a[0]+"#"+a[2];!r.toLowerCase().includes(t)||"All Servers"!==u.serverSelect&&u.serverSelect!==e.name||"All Jobs"!==u.jobSelect&&u.jobSelect!==a[5]||n.push([r,e.ip,e.name,a[3],a[5]])}))})),o((function(t){return n.length>0?Object(i.a)({},t,{playerFinderMessages:"Found "+n.length+" player"+(1===n.length?"":"s"),playerFinderFound:n}):Object(i.a)({},t,{playerFinderMessages:e?"Found nothing":"...",playerFinderFound:[]})}))};return Object(n.useEffect)((function(){var e=[];a.state.servers.forEach((function(t){t.playersData&&t.playersData.forEach((function(t){e.includes(t[5])||e.push(t[5])}))})),d(e),v(!1)}),[a.state.servers]),r.a.createElement("div",{id:"playerFinder"},r.a.createElement("h2",null,"Online Players Finder"),r.a.createElement("form",null,r.a.createElement("input",{type:"text",placeholder:"Player's name or in-game id",onChange:function(e){return function(e){o((function(t){return Object(i.a)({},t,{playerFinderInputField:e.target.value})}))}(e)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),v())}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"serverSelector"},"Filter Server: "),r.a.createElement("select",{id:"serverSelector",onChange:function(e){o((function(t){return Object(i.a)({},t,{serverSelect:e.target.value})}))},value:u.serverSelect},r.a.createElement("option",{value:"All Servers"},"All Servers"),a.state.servers.map((function(e,t){return e.isLoaded?r.a.createElement("option",{key:t,value:e.name},e.name):""}))),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"jobSelector"},"Filter Job: "),r.a.createElement("select",{id:"jobSelector",onChange:function(e){o((function(t){return Object(i.a)({},t,{jobSelect:e.target.value})}))},value:u.jobSelect},r.a.createElement("option",{value:"All Jobs"},"All Jobs"),F.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("br",null),r.a.createElement("input",{type:"button",value:"search",onClick:function(){return v()}})),r.a.createElement("div",null,r.a.createElement("p",null,u.playerFinderMessages),r.a.createElement("table",{id:"playersFound"},r.a.createElement("tbody",null,u.playerFinderFound?u.playerFinderFound.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,(e[3],r.a.createElement("div",{className:"no-avatar"}))),r.a.createElement("td",null,"#",t+1),r.a.createElement("td",null,r.a.createElement("b",null,e[0])),r.a.createElement("td",null,e[4]||"-"),r.a.createElement("td",null,r.a.createElement("a",{href:"fivem://connect/"+e[1],title:"connect"},e[1]),r.a.createElement("br",null),r.a.createElement("b",null,e[2])))})):""))))}var D=a(363),S=a.n(D),j=["#FF0000","#00FF00","#800000","#00FFFF","#000000","#B8860B","#4B0082","#FFDEAD","#8B4513","#A52A2A","#B22222","#228B22","#008B8B","#BA55D3","#F0F8FF","#FF8C00","#FF69B4","#FFA07A","#C71585","#FFF8DC","#F0FFF0","#FFFFFF","#00FF7F","#0000FF","#FFF5EE","#2F4F4F","#006400","#9966CC","#FF6347","#ADD8E6","#FF0000","#00FF00","#800000","#00FFFF","#000000","#B8860B","#4B0082","#FFDEAD","#8B4513","#A52A2A","#B22222","#228B22","#008B8B","#BA55D3","#F0F8FF","#FF8C00","#FF69B4","#FFA07A","#C71585","#FFF8DC","#F0FFF0","#FFFFFF","#00FF7F","#0000FF","#FFF5EE","#2F4F4F","#006400","#9966CC","#FF6347","#ADD8E6","#FF69B4","#FFA07A","#C71585","#FFF8DC","#F0FFF0","#FFFFFF","#00FF7F","#0000FF","#FFF5EE","#2F4F4F","#006400","#9966CC","#FF6347","#ADD8E6","#FF0000","#00FF00","#800000","#00FFFF","#000000","#B8860B","#4B0082","#FFDEAD","#8B4513","#A52A2A","#B22222","#228B22","#008B8B","#BA55D3","#F0F8FF","#FF8C00","#FF69B4","#FFA07A","#C71585","#FFF8DC","#F0FFF0","#FFFFFF","#00FF7F","#0000FF","#FFF5EE","#2F4F4F","#006400","#9966CC","#FF6347","#ADD8E6"];function A(){var e=Object(n.useState)({entries:[],counter:0}),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useContext)(p),o=Object(n.useRef)();return Object(n.useEffect)((function(){if(c.state.servers.reduce((function(e,t){return!0===t.isLoaded?e+1:e}),0)===c.state.servers.length){var e={};c.state.servers.forEach((function(t){!0===t.isLoaded&&null!==t.playersData&&t.playersData.forEach((function(t){void 0===e[t[5]]?e[t[5]]=1:e[t[5]]++}))}));var t=Object.entries(e).sort((function(e,t){return t[1]-e[1]}));l((function(e){return Object(i.a)({},e,{entries:t,counter:t.reduce((function(e,t){return e+t[1]}),0)})}))}}),[c.state.servers]),Object(n.useEffect)((function(){if(o&&o.current){var e=o.current.getContext("2d");console.log(e);var t=new S.a(e,{type:"pie",data:{labels:a.entries.map((function(e){return e[0]})),datasets:[{data:a.entries.map((function(e){return e[1]})),backgroundColor:j,borderWidth:0}]},options:{legend:{display:!1},responsive:!0,tooltips:{callbacks:{label:function(e,t){var a=t.datasets[e.datasetIndex],n=a.data.reduce((function(e,t){return e+t})),r=a.data[e.index],l=Math.floor(r/n*100+.5);return"".concat(t.labels[e.index]," - ").concat(r," players (").concat(l,"%)")}}}}});return function(){return t.destroy()}}}),[a]),r.a.createElement("div",null,r.a.createElement("h2",null,"Top Jobs Now"),0===a.entries.length?r.a.createElement("div",null,"Loading..."):r.a.createElement("table",{className:"jobstatstable"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"%"),r.a.createElement("th",null,"Job Name"),r.a.createElement("th",null,"Active"),r.a.createElement("th",null,"Links")),a.entries.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,Math.floor(e[1]/a.counter*100+.5),"%"),r.a.createElement("td",null,e[0]),r.a.createElement("td",null,e[1]),r.a.createElement("td",null,r.a.createElement(u.b,{to:encodeURI("/?playersfinder=job:"+e[0])},"Players")))})))),r.a.createElement("div",null,r.a.createElement("canvas",{id:"myChart",ref:o})))}function O(){var e=Object(n.useState)({total:0,online:0}),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useContext)(p);return Object(n.useEffect)((function(){l((function(e){return Object(i.a)({},e,{total:c.state.servers.length,online:c.state.servers.reduce((function(e,t){return!0===t.isLoaded&&t.serverData?e+1:e}),0)})}))}),[c.state.servers]),r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Server data is loaded from ",a.online," out of ",a.total," servers ",r.a.createElement("input",{type:"button",value:"refresh all servers",className:"btn refresh",onClick:function(){E()(c.dispatch)}})))}a(400);c.a.render(r.a.createElement((function(){return r.a.createElement(u.a,{basename:"ttstats"},r.a.createElement(f,null,r.a.createElement("header",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.b,{to:"/"},"Servers Status")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"?playersfinder"},"Players Finder")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"?player"},"N/A")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"?jobs"},"Jobs Stats")))),r.a.createElement("main",null,r.a.createElement(o.b,{component:function(e){var t=e.location.search.split("=");switch(t[0]){case"?status":return r.a.createElement(b,null);case"?serverinfo":return r.a.createElement(y,{url:t});case"?player":return r.a.createElement("div",null,"player");case"?jobs":return r.a.createElement(A,null);case"?playersfinder":return r.a.createElement(h,{url:t});default:return r.a.createElement(o.a,{to:"/?status"})}}})),r.a.createElement("footer",null,r.a.createElement(O,null))))}),null),document.getElementById("root"))}},[[364,1,2]]]);
//# sourceMappingURL=main.47524e3d.chunk.js.map